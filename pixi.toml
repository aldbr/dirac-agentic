[workspace]
name = "dirac-agentic"
channels = ["conda-forge", "pypi"]
platforms = ["linux-64", "osx-arm64"]

[environments]
dirac-mcp = { features = ["dirac-mcp"], solve-group = "dirac-mcp" }
dirac-dataset = { features = ["dirac-dataset"], solve-group = "dirac-dataset" }
example-single-agent = { features = ["example-single-agent"], solve-group = "example-single-agent" }
example-multi-agent = { features = ["example-multi-agent"], solve-group = "example-multi-agent" }
example-rag = { features = ["example-rag"], solve-group = "example-rag" }


[feature.dirac-mcp.pypi-dependencies]
dirac-mcp = { path = "dirac-mcp", editable = true }
pytest = "*"
pytest-mock = "*"
mypy = "*"

[feature.dirac-dataset.pypi-dependencies]
dirac-dataset = { path = "dirac-dataset", editable = true, extras = ["test"] }
mypy = "*"


[dependencies]
python = ">=3.11,<3.13"
pip = ">=25.1.1"


[feature.dirac-mcp.tasks.mcp-dev]
cmd = "fastmcp dev dirac-mcp/src/dirac_mcp/server.py"

[feature.dirac-mcp.tasks.dirac-mcp]
cmd = "fastmcp run dirac-mcp/src/dirac_mcp/server.py"

[feature.dirac-mcp.tasks.mcp-http]
cmd = "cd dirac-mcp && python -m dirac_mcp.server"

[feature.dirac-mcp.tasks.test-mcp]
cmd = "cd dirac-mcp && python -m pytest test/ -v"

[feature.dirac-mcp.tasks.mypy-mcp]
cmd = "cd dirac-mcp && mypy src/"

[feature.dirac-dataset.tasks.gen-dataset]
cmd = "cd dirac-dataset && python -m dirac_dataset gen-dataset"

[feature.dirac-dataset.tasks.push-to-hub]
cmd = "cd dirac-dataset && python -m dirac_dataset push-to-hub"

[feature.dirac-dataset.tasks.test-dataset]
cmd = "cd dirac-dataset && python -m pytest test/ -v"

[feature.dirac-dataset.tasks.mypy-dataset]
cmd = "cd dirac-dataset && mypy src/ test/"

# Example environments

[feature.example-single-agent.pypi-dependencies]
smolagents = "*"
mcp = "*"

[feature.example-single-agent.tasks.diracx-agent]
cmd = "python examples/single-agent/diracx_agent.py"

[feature.example-multi-agent.pypi-dependencies]
langgraph = "*"
langgraph-prebuilt = "*"
langgraph-supervisor = "*"
langchain-mcp-adapters = "*"
langchain-huggingface = "*"

[feature.example-multi-agent.tasks.debug-production]
cmd = "python examples/multi-agent/debug_production.py"

[feature.example-rag.pypi-dependencies]
datasets = "*"
llama-index-embeddings-huggingface = "*"
huggingface-hub = "*"
pymilvus = "*"
rich = "*"

[feature.example-rag.tasks.rag-chatbot]
cmd = "python examples/rag/rag_chatbot.py"
